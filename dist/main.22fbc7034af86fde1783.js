(()=>{"use strict";var e=[];function t(){var t=document.getElementById("location").value.trim().toLowerCase(),n=document.getElementById("travelDate").value;console.log("date from client:",n);var o=e.find((function(e){return e.name.toLowerCase()===t}));if(console.log("Selected Place: ",o),o){var a=o.lat,r=o.lng,i="/api/weather?lat=".concat(a,"&lng=").concat(r,"&date=").concat(n);fetch(i).then((function(e){return e.json()})).then((function(e){console.log("Forecast data for travel date",e),function(e){var t=document.getElementById("weather");if(t.innerHTML="",e&&void 0!==e.temp&&e.weather&&e.weather.description){var n=document.createElement("p");n.textContent="Temperature: ".concat(e.temp,"Â°C"),t.appendChild(n);var o=document.createElement("p");o.textContent="Condition: ".concat(e.weather.description),t.appendChild(o)}else t.innerHTML="Weather data is not available"}(e),function(e){var t=new Date,n=new Date(e)-t,o=Math.ceil(n/864e5),a=document.getElementById("countdown");a.innerHTML="Days until trip: ".concat(o),o<0?a.innerHTML="This date in the past":0===o&&(a.innerHTML="Your trip is today!")}(n)})).catch((function(e){return console.error("Error fetching weather data:",e)}));var c="/api/destination?destination=".concat(encodeURIComponent(t));fetch(c).then((function(e){return e.json()})).then((function(e){return function(e){var t=document.getElementById("destination");if(t.innerHTML="",e&&e.hits&&e.hits.length>0){var n=document.createElement("img");n.src=e.hits[0].webformatURL,t.appendChild(n)}else t.innerHTML="Displaying image failed"}(e)})).catch((function(e){return console.error("error fetching destination image: ",e)}))}else console.error("Selected location not found in geonames data")}window.searchCities=function(){var t=document.getElementById("location").value;if(!(t.length<3)){var n="/api/searchCities?q=".concat(t);fetch(n).then((function(e){return e.json()})).then((function(t){var n,o;console.log(t),e=t.geonames,n=t.geonames,(o=document.getElementById("suggestions")).innerHTML="",n.forEach((function(e){var t=document.createElement("option");t.value=e.name,o.appendChild(t)}))})).catch((function(e){return console.error("Error fetching data: ",e)}))}},document.addEventListener("DOMContentLoaded",(function(){document.getElementById("location").addEventListener("input",searchCities),document.getElementById("submitForm").addEventListener("click",t)}))})();